schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 1e64ec210edf48501f6c8be6010a10b0
      size: 1507
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 58b1d9db9879785bd005537f39ebf356
      size: 1842
    params:
      params.yaml:
        concatenation:
          input_path: data/raw/motos
          output_path: data/raw
          output_filename: motos_raw.csv
    outs:
    - path: data/raw/motos_raw.csv
      hash: md5
      md5: e66243568d2dd60b8cb18b57bea3f77b
      size: 4261506
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 2cdfa017073b7ae201839396c9f5ee31
      size: 2424
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: a9f6fdfde35b0a23ac32fb81436975da
      size: 5549
    - path: data/processed/X_train.csv
      hash: md5
      md5: 70aec5ed70b7ae1e566c3d28b8ff06b0
      size: 21538
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: d5f1e5384eab8dc5083db1f7c41d2e22
      size: 49195
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 22c45d3e9e0f677a8fe17c1064b7f07c
      size: 2119
    - path: src/stages/train.py
      hash: md5
      md5: 49cc1a26b81e03e5c97b35f7bec83fc8
      size: 1949
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: d6b973446ec367a6a139ffb073d3d340
      size: 2891
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/motos_raw_final.csv
      hash: md5
      md5: 4a58657e649cbbc75ba25ad5f766e98c
      size: 223354
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: ac92f278a9d3ecd87725499d010a8195
      size: 3057
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.1
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 2cdfa017073b7ae201839396c9f5ee31
      size: 2424
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: a9f6fdfde35b0a23ac32fb81436975da
      size: 5549
    - path: data/processed/X_train.csv
      hash: md5
      md5: 70aec5ed70b7ae1e566c3d28b8ff06b0
      size: 21538
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: d5f1e5384eab8dc5083db1f7c41d2e22
      size: 49195
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 22c45d3e9e0f677a8fe17c1064b7f07c
      size: 2119
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 2cdfa017073b7ae201839396c9f5ee31
      size: 2424
    - path: models/final_pipeline.joblib
      hash: md5
      md5: d6b973446ec367a6a139ffb073d3d340
      size: 2891
    - path: src/stages/evaluate.py
      hash: md5
      md5: b011553596ca667786963ade90dc9696
      size: 3077
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: 6e4086077cf8efb3cdb10edde8bd23d1
      size: 142
  preprocessing:
    cmd: python src/stages/preprocessing.py --config params.yaml
    deps:
    - path: src/stages/preprocessing.py
      hash: md5
      md5: 307516218cd1f96b8872733595ce349d
      size: 4419
    params:
      params.yaml:
        preprocessing:
          output_file: data/raw/motos_raw_final.csv
    outs:
    - path: data/raw/motos_raw_final.csv
      hash: md5
      md5: 4a58657e649cbbc75ba25ad5f766e98c
      size: 223354
