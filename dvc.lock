schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 1e64ec210edf48501f6c8be6010a10b0
      size: 1507
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 58b1d9db9879785bd005537f39ebf356
      size: 1842
    params:
      params.yaml:
        concatenation:
          input_path: data/raw/motos
          output_path: data/raw
          output_filename: motos_raw.csv
    outs:
    - path: data/raw/motos_raw.csv
      hash: md5
      md5: f2d9dcc8997db150e67ef46ca07bb3d6
      size: 4391782
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 5d4e057576e3aff8180453ea7973b402
      size: 3017
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 9a473c7c658765b851763be1056fb6d7
      size: 7202
    - path: data/processed/X_train.csv
      hash: md5
      md5: 82f60a82d1ef5f13ed6bdadd5a54a82e
      size: 26263
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 2d00ce116fa30600d01a995a28e8260e
      size: 63998
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 148a40c55d960ed591a68004ebb1b826
      size: 2207
    - path: src/stages/train.py
      hash: md5
      md5: 49cc1a26b81e03e5c97b35f7bec83fc8
      size: 1949
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: cf58ebfcccebe9efd91b41311da09ffc
      size: 3007
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/motos_raw_final.csv
      hash: md5
      md5: daa65ab91424e9501ffc1cd88360cd55
      size: 230814
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: a3973da98cd0f56df26c6a096999934d
      size: 3070
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.1
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 5d4e057576e3aff8180453ea7973b402
      size: 3017
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 9a473c7c658765b851763be1056fb6d7
      size: 7202
    - path: data/processed/X_train.csv
      hash: md5
      md5: 82f60a82d1ef5f13ed6bdadd5a54a82e
      size: 26263
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 2d00ce116fa30600d01a995a28e8260e
      size: 63998
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 148a40c55d960ed591a68004ebb1b826
      size: 2207
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 5d4e057576e3aff8180453ea7973b402
      size: 3017
    - path: models/final_pipeline.joblib
      hash: md5
      md5: cf58ebfcccebe9efd91b41311da09ffc
      size: 3007
    - path: src/stages/evaluate.py
      hash: md5
      md5: b011553596ca667786963ade90dc9696
      size: 3077
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: 365f283c21a8563275efdc1b6f490e3f
      size: 144
  preprocessing:
    cmd: python src/stages/preprocessing.py --config params.yaml
    deps:
    - path: src/stages/preprocessing.py
      hash: md5
      md5: fe14a5d315637da6864cb14b75f7136c
      size: 4407
    params:
      params.yaml:
        preprocessing:
          output_file: data/raw/motos_raw_final.csv
    outs:
    - path: data/raw/motos_raw_final.csv
      hash: md5
      md5: daa65ab91424e9501ffc1cd88360cd55
      size: 230814
