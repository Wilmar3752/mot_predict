schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: b150b1ded5fb2916f85e22082dd4f7fa
      size: 1530
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 58b1d9db9879785bd005537f39ebf356
      size: 1842
    params:
      params.yaml:
        concatenation:
          input_path: data/raw/motos
          output_path: data/raw
          output_filename: motos_raw.csv
    outs:
    - path: data/raw/motos_raw.csv
      hash: md5
      md5: c0776b7f026ac39efa82cb6d107e3a34
      size: 2024957
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: ec4be2a4e4bf81ac638bd60730227507
      size: 54753
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: d4c8b6d4ef6ab8a3698581b40b3c8a87
      size: 123318
    - path: data/processed/X_train.csv
      hash: md5
      md5: 8a38497b22c04716317b038a6017729e
      size: 489945
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 623a2361cdb4f29f5ada1c1e9fd956bc
      size: 1109088
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: c841c07e99e196e8a91029b26515917d
      size: 7659
    - path: src/stages/train.py
      hash: md5
      md5: 91aeb499dbd74d182d0240fa050e5ef7
      size: 1933
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 5f65080861d3abf0391a31a1a88f830b
      size: 292599
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: d8dedc424a0365867de95350bbbef87d
      size: 3715976
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 6367326473b30ab5974bbd2423724f72
      size: 3197
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.1
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 1430500c9805b92e87b178afa8bfaf47
      size: 60136
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 54347b76dcdf6f10abd88d123fa2b359
      size: 116710
    - path: data/processed/X_train.csv
      hash: md5
      md5: f593e4eaae19d06a4a4e770e80ab9700
      size: 536484
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: a68cde7de3d1094c1956f6e4979adbe8
      size: 1050487
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: d133e9fbb04f0013e5db77cdf0afa476
      size: 7403
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: ec4be2a4e4bf81ac638bd60730227507
      size: 54753
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 5f65080861d3abf0391a31a1a88f830b
      size: 292599
    - path: src/stages/evaluate.py
      hash: md5
      md5: b011553596ca667786963ade90dc9696
      size: 3077
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: 12a10519ba90055561fdfa0f8e7a924b
      size: 141
